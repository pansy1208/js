<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .box {
        width: 100px;
        height: 100px;
        background-color: pink;
      }
    </style>
  </head>
  <body>
    <button>toggle</button>
    <!-- 1.box的显示隐藏不确定
    2.显示隐藏由display控制 -->
    <div class="box"></div>
    <script>
      var btn = document.querySelector("button");
      var box = document.querySelector(".box");
      var flag = true;
      // btn.addEventListener("click", function () {
      //   flag = !flag;
      //   if (flag) {
      //     box.style.display = "block";
      //   } else {
      //     box.style.display = "none";
      //   }
      // });

      function toggle(el) {
        var none = getComputedStyle(el, null)["display"];
        if (none === "none") {
          var val = 0;
          el.style.display = "block";
          el.style.opacity = val;
          el.timer = setInterval(function () {
            val += 0.1;
            if (val >= 1) {
              el.style.opacity = 1;
              el.style.display = "block";
              clearInterval(el.timer);
              return;
            }
            el.style.opacity = val;
            
          }, 1000);
        } else {
          var val = 1;
          el.style.display = "none";
          el.style.opacity = val;
          el.timer = setInterval(function () {
            val -= 0.1;
            if (val <= 0) {
              el.style.opacity = 0;
              el.style.display = "none";
              clearInterval(el.timer);
              return;
            }
            el.style.opacity = val;
          }, 1000);
        }
        console.log(getComputedStyle(el, null)["display"]);
        return el;
      }

      btn.addEventListener("click", function () {
        toggle(box);
      });
    </script>
  </body>
</html>
